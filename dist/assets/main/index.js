System.register("chunks:///_virtual/MergeObjectType.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,c,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,c=e._decorator,n=e.Node}],execute:function(){var o,l,p,u,a,s;i._RF.push({},"3473f2wfdhGaIdwH18L1gfW","MergeObjectType",void 0);var y=c.ccclass,f=c.property;e("MergeObjectType",(o=y("MergeObjectType"),l=f({type:[n]}),o((a=t((u=function(){r(this,"type",a,this),r(this,"levels",s,this)}).prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=t(u.prototype,"levels",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=u))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/Movable.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,n,i,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.Node,r=t.Component}],execute:function(){var s;e._RF.push({},"a17c27MVV1Kl6otSo44bAW5","Movable",void 0);var c=n.ccclass;t("Movable",c("Movable")(s=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){var t=this.node;t.on(i.EventType.TOUCH_START,this.onTouchStart,this),t.on(i.EventType.TOUCH_MOVE,this.onToucnMove,this)},n.onTouchStart=function(){var t=this.node,o=t.parent;o.removeChild(t),o.addChild(t)},n.onToucnMove=function(t){var o=t.getUIDelta(),e=o.x,n=o.y,i=this.node.getPosition();this.node.setPosition(i.x+e,i.y+n)},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameComponent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MergeObject.ts"],(function(e){"use strict";var t,o,n,i,r,a,l,s,c,p,u,f,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){l=e.cclegacy,s=e._decorator,c=e.Prefab,p=e.Node,u=e.randomRangeInt,f=e.instantiate,h=e.Component},function(e){y=e.MergeObject}],execute:function(){var m,v,b,g,d,C,T,j,w;l._RF.push({},"c4424YhL0JCr7bTS1khpND4","GameComponent",void 0);var L=s.ccclass,E=s.property;e("GameComponent",(m=L("GameComponent"),v=E({type:c}),b=E({type:p}),g=E({type:p}),m((T=t((C=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(i(t),"object",T,i(t)),n(i(t),"field",j,i(t)),n(i(t),"objectLayer",w,i(t)),t}o(t,e);var l=t.prototype;return l.start=function(){for(var e=0;e<3;e++)this.createRandomTree()},l.createRandomTree=function(){var e=this,t=this.cells.filter((function(t){return e.isEmptyCell(t)}));if(0!==t.length){var o=t[u(0,t.length)];this.createTree(o)}},l.isEmptyCell=function(e){var t;return!(null!==(t=this.getTree(e))&&void 0!==t&&t)},l.getTree=function(e){return this.trees.find((function(t){return t.position.equals(e.position)}))},l.createTree=function(e){var t=f(this.object);t.parent=this.objectLayer,t.position=e.position,t.on(p.EventType.TOUCH_END,this.onTreeTouchStart(t),this)},l.onTreeTouchStart=function(e){var t=this;return function(o){for(var n,i=null,a=0,l=r(t.cells);!(n=l()).done;){var s=n.value,c=Math.pow(s.position.x-e.position.x,2)+Math.pow(s.position.y-e.position.y,2);(!i||c<a)&&(a=c,i=s)}var p=t.getTree(i);if(p&&p!==e){var u=e.getComponent(y),f=p.getComponent(y);u.equals(f)?(p.removeFromParent(),u.level+=1):t.moveToClosestEmptyCell(p),e.position=i.position}else e.position=i.position}},l.moveToClosestEmptyCell=function(e){for(var t,o=this,n=this.cells.filter((function(e){return o.isEmptyCell(e)})),i=null,a=0,l=r(n);!(t=l()).done;){var s=t.value,c=Math.pow(s.position.x-e.position.x,2)+Math.pow(s.position.y-e.position.y,2);(!i||c<a)&&(i=s,a=c)}i&&(e.position=i.position)},a(t,[{key:"cells",get:function(){return this.field.children}},{key:"trees",get:function(){return this.objectLayer.children}}]),t}(h)).prototype,"object",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(C.prototype,"field",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(C.prototype,"objectLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d));l._RF.pop()}}}));

System.register("chunks:///_virtual/MergeObject.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./MergeObjectType.ts"],(function(e){"use strict";var t,r,i,n,l,o,p,c,s,u,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,l=e.createClass},function(e){o=e.cclegacy,p=e._decorator,c=e.randomRangeInt,s=e.log,u=e.Component},function(e){y=e.MergeObjectType}],execute:function(){var a,v,f,h,b,g,_,d;o._RF.push({},"ecec0FUFb9HuY2bPctRQ70+","MergeObject",void 0);var j=p.ccclass,O=p.property;e("MergeObject",(a=j("MergeObject"),v=O({step:1}),f=O({type:[y]}),a((t((b=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(n(t),"_type",g,n(t)),i(n(t),"_level",_,n(t)),i(n(t),"types",d,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){var e=this.types.map((function(e){return e.type})),t=e[c(0,e.length)];s("merge object selected type "+t),this.type=t,this.level=1},o.equals=function(e){return this.type==e.type&&this.level===e.level},l(t,[{key:"type",get:function(){return this._type},set:function(e){var t=this,r=this.types.find((function(e){return e.type===t._type})),i=this.types.find((function(t){return t.type===e})),n=null==r?void 0:r.levels[this.level-1],l=null==i?void 0:i.levels[this.level-1];i&&(n&&(n.active=!1),l&&(l.active=!0),this._type=e)}},{key:"level",get:function(){return this._level},set:function(e){var t=this,r=this.types.find((function(e){return e.type===t.type})),i=null==r?void 0:r.levels[this._level-1],n=null==r?void 0:r.levels[e-1];n&&(i&&(i.active=!1),n.active=!0,this._level=e)}}]),t}(u)).prototype,"type",[O],Object.getOwnPropertyDescriptor(b.prototype,"type"),b.prototype),g=t(b.prototype,"_type",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(b.prototype,"level",[v],Object.getOwnPropertyDescriptor(b.prototype,"level"),b.prototype),_=t(b.prototype,"_level",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=t(b.prototype,"types",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=b))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./MergeObjectType.ts","./Movable.ts","./MergeObject.ts","./GameComponent.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});